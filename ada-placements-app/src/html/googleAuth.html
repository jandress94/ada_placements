<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Google Authentication</title>

    <link rel="stylesheet" href="../css/index.css">

    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>

    <script src="../js/jq/jquery-3.4.1.js"></script>

    <script>if (window.module) module = window.module;</script>

    <script type="text/javascript">
      const electron = require('electron');
      const {ipcRenderer, clipboard} = electron;

      let auth_url;

      ipcRenderer.on('authUrl', function(e, authUrl) {
        auth_url = authUrl;
      });

      $(document).ready(function(){
        $('#copyUrlButton').click(function() {
          clipboard.writeText(auth_url);
          alert('URL copied to clipboard!');
        });

        const form = document.querySelector('form');
        form.addEventListener('submit', sendAuthCode);
      });

      function sendAuthCode(e) {
        e.preventDefault();
        const authCode = document.querySelector('#codeInput').value;
        ipcRenderer.send('authCode', authCode);
      }
    </script>
  </head>
  <body>
    <div id="authUrlDiv">
      Click button to copy authentication URL:
      <button id="copyUrlButton">Copy URL</button>
    </div>
    <br />
    <div id="codeDiv">
      <form>
        <div>
          <label>Paste the URL into a web browser, and enter the code from that page here:</label>
          <input type="text" id="codeInput">
        </div>
        <br />
        <button type="submit">Authenticate</button>
      </form>
    </div>
  </body>
</html>
